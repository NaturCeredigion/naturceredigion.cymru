<!DOCTYPE html>
<html
  lang="{{ site.LanguageCode | default `en-US` }}"
  itemscope
  itemtype="http://schema.org/WebPage">
<head>
  <!-- head (don't cache it) -->
  {{ partial "essentials/head.html" . }}


  <!-- cache partial only in production -->
  {{ if hugo.IsProduction }}
  {{ partialCached "essentials/style.html" . }}
  {{ else }}
  {{ partial "essentials/style.html" . }}
  {{ end }}
</head>

<body>
<!-- cache partial only in production -->
{{ if hugo.IsProduction }}
{{ partialCached "preloader.html" . }}
{{ partialCached "gtm-noscript.html" . }}
{{ else }}
{{ partial "preloader.html" . }}
{{ end }}


<!-- header (don't cache it) -->
{{ partial "essentials/header.html" . }}


<main>
  {{ block "main" . }}{{ end }}
</main>

<script>
  // Set your password here
  const PASSWORD = "naturceredigion";

  // Skip check on homepage
  if (window.location.pathname !== "/en/") {

    // Check if user is already logged in
    if (localStorage.getItem("loggedIn") !== "true") {
      const input = prompt("Enter password to view this page:");
      if (input === PASSWORD) {
        localStorage.setItem("loggedIn", "true"); // store login state
        alert("Access granted!");
      } else {
        alert("Wrong password! Redirecting to homepage...");
        window.location.href = "/en/";
      }
    }
  }
</script>

<!-- cache partial only in production -->
{{ if hugo.IsProduction }}
{{ partialCached "essentials/footer.html" . }}
{{ partialCached "essentials/script.html" . }}
{{ else }}
{{ partial "essentials/footer.html" . }}
{{ partial "essentials/script.html" . }}
{{ end }}
</body>
</html>
